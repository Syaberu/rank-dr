<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è©³ç´°</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1 id="player-title"></h1>

<div class="skin-container">
  <img id="player-skin" alt="ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¹ã‚­ãƒ³">
</div>

<div id="player-info"></div>
<div id="match-history"></div>

<a href="index.html" class="link-btn">æˆ»ã‚‹</a>

<script src="data.js"></script>

<script>
const params = new URLSearchParams(window.location.search);
const playerName = params.get("name");

const player = players.find(p => p.name === playerName);

const title = document.getElementById("player-title");
const info = document.getElementById("player-info");
const history = document.getElementById("match-history");
const skinImg = document.getElementById("player-skin");

if (!player) {
  title.textContent = "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“";
} else {

  title.textContent = player.name;

  // ğŸ”¥ ã‚¹ã‚­ãƒ³èª­ã¿è¾¼ã¿
  skinImg.src = "skins/" + player.name + ".png";

  // ç”»åƒãŒå­˜åœ¨ã—ãªã„å ´åˆã®å¯¾ç­–
  skinImg.onerror = function() {
    skinImg.src = "skins/default.png";
  };

  const playerMatches = matches.filter(m =>
    m.winner === player.name || m.loser === player.name
  );

  const wins = playerMatches.filter(m => m.winner === player.name).length;
  const total = playerMatches.length;
  const winRate = total === 0 ? 0 :
    ((wins / total) * 100).toFixed(1);

  info.innerHTML = `
    <p>Tier: ${player.tier}</p>
    <p>ãƒ¬ãƒ¼ãƒˆ: ${player.rating}</p>
    <p>å‹ç‡: ${winRate}%</p>
    <p>è©¦åˆæ•°: ${total}</p>
  `;

  if (total === 0) {
    history.innerHTML = "<p>è©¦åˆå±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</p>";
  } else {
    playerMatches.forEach(match => {

      const card = document.createElement("div");
      card.className = "player-card";

      const isWin = match.winner === player.name;

      card.innerHTML = `
        <span>${match.date}</span>
        <span>
          <span class="${isWin ? 'win' : 'lose'}">
            ${isWin ? "å‹ã¡" : "è² ã‘"}
          </span>
          vs ${isWin ? match.loser : match.winner}
        </span>
        <span>${match.change}</span>
      `;

      history.appendChild(card);
    });
  }
}
</script>
</body>
</html>